<mat-card>

  <mat-card-title fxLayout="column"
                  fxLayout.gt-sm="row"
                  fxLayoutGap="10px">
    <h3>{{'general.matches.edit.startingEleven.title' | translate}}</h3>

    <span fxFlex=""></span>
    <mat-form-field>
      <mat-select placeholder="{{'general.matches.edit.tacticalFormation' | translate}}"
                  (selectionChange)="setFormation($event)">
        <mat-option *ngFor="let formation of tacticalFormations | orderBy: ['title']"
                    [value]="formation">
          {{formation.title}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-card-title>

  <!-- *ngIf="form.get('assignedFormation').value" -->
  <mat-card-content fxLayout="column"
                    fxLayout.gt-sm="row">
    <div class="players"
         fxFlex="90"
         *ngIf="assignedFormation"
         [dragula]="playerList">

      <div *ngFor="let position of assignedFormation.positionList; trackBy: title"
           [ngClass]="'player ' + position">
        <match-player [members]="members"></match-player>
      </div>
      <!--assignedPosition]="form.get('assignedPlayers').value | filterBy: ['position'] : position"-->
    </div>

    <!-- *ngIf="form.get('assignedFormation').value" -->
    <div class="substitutions"
         fxFlex="10">
      <mat-card-subtitle>{{'general.matches.edit.substituteBench' | translate}}</mat-card-subtitle>

      <div fxLayout="row wrap"
           *ngIf="assignedFormation">

        <div *ngFor="let number of numbers"
             fxFlex="50"
             [dragula]="playerList"
             [ngClass]="'substitute ' + number">
          <!-- *ngFor="let member of substitutes"
                        [id]="member.id"
                        [member]="member" -->
          <match-player [ngClass]="'substitute ' + number"></match-player>
        </div>

      </div>

    </div>
  </mat-card-content>


  <mat-card-actions><!-- *ngIf="(team.assignedPlayers
                    | isMemberInStartingElevenFilter : form.get('assignedPlayers').value
                    | isMemberInSubstitutesListFilter : form.get('assignedSubstitutes').value) as players" -->
    <mat-card-subtitle>{{'general.matches.edit.squad' | translate}}</mat-card-subtitle>

    <p *ngIf="!assignedTeamPlayers || assignedTeamPlayers.length === 0">{{'general.matches.edit.noAssignedPlayers' |
      translate}}</p>

    <div fxLayout="row wrap"
         [dragula]="playerList">
      <match-player fxFlex="5"
                    *ngFor="let member of assignedTeamPlayers | orderBy: ['mainData.lastName', 'mainData.firstName', 'mainData.birthday']"
                    [member]="member">
      </match-player>
    </div>
  </mat-card-actions>
</mat-card>

<ng-template #loadingTemplate>
  <loading-indicator></loading-indicator>
</ng-template>
