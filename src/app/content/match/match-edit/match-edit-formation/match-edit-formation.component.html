<mat-card [formGroup]="form">
  <mat-card-title *ngIf="assignedTeamPlayers"
                  fxLayout="column"
                  fxLayout.gt-sm="row"
                  fxLayoutGap="10px">
    <h3>{{'general.matches.edit.startingEleven.title' | translate}}</h3>

    <span fxFlex=""></span>
    <mat-form-field>
      <mat-select placeholder="{{'general.matches.edit.tacticalFormation' | translate}}"
                  formControlName="assignedFormation" (selectionChange)="changeFormation($event)">
        <mat-option *ngFor="let formation of tacticalFormations | orderBy: ['title']"
                    [value]="formation.title">
          {{formation.title}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-card-title>


  <mat-card-content *ngIf="assignedTeamPlayers && match.assignedFormation"
                    fxLayout="column">

    <!-- Starting 11 -->
    <!--<match-field-square *ngIf="getCoordinates(i) as position"-->
    <!--[kp]="playerPositions"-->
    <!--[match]="match"-->
    <!--[members]="[]"-->
    <!--[position]="position">-->
    <!--</match-field-square>-->


    <div fxLayout="column"
         fxLayout.gt-sm="row">
      <div fxFlex="100"
           cdkDropList
           id="playerList"
           [cdkDropListConnectedTo]="dropListIds"
           class="playerList"
           [cdkDropListData]="assignedTeamPlayers"
           >
        <div *ngFor="let item of assignedTeamPlayers"
             cdkDrag
             [cdkDragData]="item"
             class="player"
        >{{item.mainData.firstName}} {{item.mainData.lastName}}
        </div>
      </div>
    </div>

    <div class="soccer-field">
      <div *ngFor="let list of dropListIds; let i = index"
           cdkDropList
           [id]="dropListIds[i]"
           [cdkDropListConnectedTo]="dropListIds"
           [cdkDropListData]="thirty[i]"
           (cdkDropListDropped)="drop($event)"
           class="soccer-field-list">
        <div *ngFor="let item of thirty[i]; let j = index" cdkDrag [cdkDragData]="item">

          <div class="soccer-field-list-item">
            <div
              [ngClass]="{placeholder: checkCoordinates(i, j) && !item.id, 'player': !!item.id}">
              <p *ngIf="!item.id">&nbsp;</p>

              {{item.mainData.firstName}} {{item.mainData.lastName}}
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- Substitutions -->
    <div class="substitutions"
         fxFlex="10">
      <mat-card-subtitle>{{'general.matches.edit.substituteBench' | translate}}</mat-card-subtitle>
      <div fxLayout="column"
           fxLayout.gt-sm="row">
        <!--<cdk-drop fxFlex="100"
                  #playerList
                  [connectedTo]="[substitutionList]"
                  class="list-sorted"
                  (dropped)="addToList($event)"
                  [data]="items">
          <match-player *ngFor="let item of items" cdkDrag></match-player>
        </cdk-drop>-->
      </div>
    </div>
  </mat-card-content>

  <!-- PlayerList -->
  <mat-card-actions>
    <mat-card-subtitle>{{'general.matches.edit.squad' | translate}}</mat-card-subtitle>

    <p *ngIf="!assignedTeamPlayers || assignedTeamPlayers.length === 0">
      {{'general.matches.edit.noAssignedPlayers' | translate}}
    </p>


  </mat-card-actions>


</mat-card>

<ng-template #loadingTemplate>
  <loading-indicator></loading-indicator>
</ng-template>
