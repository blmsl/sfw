<mat-card [formGroup]="form">
  <mat-card-title *ngIf="assignedTeamPlayers"
                  fxLayout="column"
                  fxLayout.gt-sm="row"
                  fxLayoutGap="10px">
    <h3>{{'general.matches.edit.startingEleven.title' | translate}}</h3>

    <span fxFlex=""></span>
    <mat-form-field>
      <mat-select placeholder="{{'general.matches.edit.tacticalFormation' | translate}}"
                  formControlName="assignedFormation" (selectionChange)="changeFormation($event)">
        <mat-option *ngFor="let formation of tacticalFormations | orderBy: ['title']"
                    [value]="formation.title">
          {{formation.title}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-card-title>


  <mat-card-content *ngIf="assignedTeamPlayers && match.assignedFormation"
                    fxLayout="column">

    <!-- Starting 11 -->
    <!--<match-field-square *ngIf="getCoordinates(i) as position"-->
    <!--[kp]="playerPositions"-->
    <!--[match]="match"-->
    <!--[members]="[]"-->
    <!--[position]="position">-->
    <!--</match-field-square>-->


    <div fxLayout="column"
         fxLayout.gt-sm="row">
      <div fxFlex="100"
           cdkDropList
           id="playerList"
           [cdkDropListConnectedTo]="['0','1','2', '3', '4', '5']"
           class="playerList"
           [cdkDropListData]="assignedTeamPlayers"
           (cdkDropListDropped)="addToList($event)">
        <div *ngFor="let item of assignedTeamPlayers"
             cdkDrag
             [cdkDragData]="item"
             class="player"
        >{{item.mainData.firstName}} {{item.mainData.lastName}}
        </div>
      </div>
    </div>

    <div class="soccer-field">
      <div
        cdkDropList
        id="0"
        [cdkDropListConnectedTo]="['playerList', '1', '2', '3', '4', '5']"
        [cdkDropListData]="thirty[0]"
        (cdkDropListDropped)="addToList($event)"
        class="soccer-field-list">
        <div *ngFor="let item of thirty[0]; let i = index" cdkDrag>
          <div class="soccer-field-list-item">
            <div
              [ngClass]="{placeholder: checkCoordinates(0, i) && !item.mainData.firstName, 'player': !!item.mainData.firstName}">
              <p *ngIf="!item.mainData.firstName">&nbsp;</p>
              {{item.mainData.firstName}} {{item.mainData.lastName}}
            </div>
          </div>
        </div>
      </div>
      <div
        cdkDropList
        id="1"
        [cdkDropListConnectedTo]="['playerList', '0', '2', '3', '4', '5']"
        [cdkDropListData]="thirty[1]"
        (cdkDropListDropped)="addToList($event)"
        class="soccer-field-list">
        <div class="box" *ngFor="let item of thirty[1]; let i = index" cdkDrag>
          <div class="soccer-field-list-item">
            <div
              [ngClass]="{placeholder: checkCoordinates(1, i) && !item.mainData.firstName, 'player': !!item.mainData.firstName}">
              <p *ngIf="!item.mainData.firstName">&nbsp;</p>
              {{item.mainData.firstName}} {{item.mainData.lastName}}
            </div>
          </div>
        </div>
      </div>
      <div
        cdkDropList
        id="2"
        [cdkDropListConnectedTo]="['playerList', '0', '1', '3', '4', '5']"
        [cdkDropListData]="thirty[2]"
        (cdkDropListDropped)="addToList($event)"
        class="soccer-field-list"
      >
        <div class="box" *ngFor="let item of thirty[2]; let i = index" cdkDrag>
          <div class="soccer-field-list-item">
            <div
              [ngClass]="{placeholder: checkCoordinates(2, i) && !item.mainData.firstName, 'player': !!item.mainData.firstName}">
              <p *ngIf="!item.mainData.firstName">&nbsp;</p>
              {{item.mainData.firstName}} {{item.mainData.lastName}}
            </div>
          </div>
        </div>
      </div>
      <div
        cdkDropList
        id="3"
        [cdkDropListConnectedTo]="['playerList', '0', '1', '2', '4', '5']"
        [cdkDropListData]="thirty[3]"
        (cdkDropListDropped)="addToList($event)"
        class="soccer-field-list">
        <div class="box" *ngFor="let item of thirty[3]; let i = index" cdkDrag>
          <div class="soccer-field-list-item">
            <div
              [ngClass]="{placeholder: checkCoordinates(3, i) && !item.mainData.firstName, 'player': !!item.mainData.firstName}">
              <p *ngIf="!item.mainData.firstName">&nbsp;</p>
              {{item.mainData.firstName}} {{item.mainData.lastName}}
            </div>
          </div>
        </div>
      </div>
      <div
        cdkDropList
        id="4"
        [cdkDropListConnectedTo]="['playerList', '0', '1', '2', '3', '5']"
        [cdkDropListData]="thirty[4]"
        (cdkDropListDropped)="addToList($event)"
        class="soccer-field-list">
        <div class="box" *ngFor="let item of thirty[4]; let i = index" cdkDrag>
          <div class="soccer-field-list-item">
            <div
              [ngClass]="{placeholder: checkCoordinates(4, i) && !item.mainData.firstName, 'player': !!item.mainData.firstName}">
              <p *ngIf="!item.mainData.firstName">&nbsp;</p>
              {{item.mainData.firstName}} {{item.mainData.lastName}}
            </div>
          </div>
        </div>
      </div>
      <div
        cdkDropList
        id="5"
        [cdkDropListConnectedTo]="['playerList', '0', '1', '2', '3', '4']"
        [cdkDropListData]="thirty[5]"
        (cdkDropListDropped)="addToList($event)"
        class="soccer-field-list">
        <div class="box" *ngFor="let item of thirty[5]; let i = index" cdkDrag>
          <div class="soccer-field-list-item">
            <div
              [ngClass]="{placeholder: checkCoordinates(5, i) && !item.mainData.firstName, 'player': !!item.mainData.firstName}">
              <p *ngIf="!item.mainData.firstName">&nbsp;</p>
              {{item.mainData.firstName}} {{item.mainData.lastName}}
            </div>
          </div>
        </div>
      </div>
    </div>


    <!-- Substitutions -->
    <div class="substitutions"
         fxFlex="10">
      <mat-card-subtitle>{{'general.matches.edit.substituteBench' | translate}}</mat-card-subtitle>
      <div fxLayout="column"
           fxLayout.gt-sm="row">
        <!--<cdk-drop fxFlex="100"
                  #playerList
                  [connectedTo]="[substitutionList]"
                  class="list-sorted"
                  (dropped)="addToList($event)"
                  [data]="items">
          <match-player *ngFor="let item of items" cdkDrag></match-player>
        </cdk-drop>-->
      </div>
    </div>
  </mat-card-content>

  <!-- PlayerList -->
  <mat-card-actions>
    <mat-card-subtitle>{{'general.matches.edit.squad' | translate}}</mat-card-subtitle>

    <p *ngIf="!assignedTeamPlayers || assignedTeamPlayers.length === 0">
      {{'general.matches.edit.noAssignedPlayers' | translate}}
    </p>


  </mat-card-actions>


</mat-card>

<ng-template #loadingTemplate>
  <loading-indicator></loading-indicator>
</ng-template>
