<mat-card>
  <mat-card-title>
    <mat-icon>details</mat-icon>
    {{'general.menu.sponsor.detail' | translate}}
  </mat-card-title>
  <mat-card-subtitle></mat-card-subtitle>

  <mat-card-content>

    <div *ngIf="sponsor; else loadingTemplate">

      <div fxLayout="column"
           fxLayout.gt-sm="row"
           fxLayoutGap="30px"
           *ngIf="categories$ | async as categories; else loadingTemplate">

        <div fxFlex.gt-sm="60">

          <div fxLayout="column"
               fxLayoutGap="10px">

            <h1>{{sponsor.title}}</h1>

            <a target="_blank" style="color: red" href="{{sponsor.externalLink}}">
              <mat-icon>link</mat-icon>
              {{'general.sponsors.edit.link' | translate}}
            </a>

            <div [innerHtml]="sponsor.description"></div>

          </div>

          <h4>{{'general.sponsors.edit.timeTitle' | translate}}</h4>
          <ul>
            <li *ngIf="sponsor.startDate">
              {{'general.sponsors.edit.startDate' | translate}}:
              {{sponsor.startDate.seconds * 1000 | date: 'dd.MM.yy'}}
            </li>
            <li *ngIf="!sponsor.startDate">{{'general.sponsors.edit.noStartDate' | translate}}</li>
            <li *ngIf="sponsor.endDate">
              {{'general.sponsors.edit.endDate' | translate}}:
              {{sponsor.endDate.seconds * 1000 | date: 'dd.MM.yy'}}
            </li>
            <li *ngIf="!sponsor.endDate">{{'general.sponsors.edit.noEndDate' | translate}}</li>
          </ul>

          <div class="mat-text-muted text-sm"
               [innerHtml]="sponsor.internalInfo">
          </div>

          <h4>{{'general.sponsors.edit.category' | translate}}</h4>
          <p>
            <span *ngFor="let categoryId of sponsor.assignedCategories; let last = last">
              <a [routerLink]="['/categories/details', categoryId]"
                 *ngFor="let category of categories | filterBy: ['id']: categoryId">
                {{category.title}}
              </a>
              <span *ngIf="!last">, </span>
            </span>
          </p>

        </div>

        <div fxFlex="40">
          <h3>{{'general.sponsors.edit.imageUrl' | translate}}</h3>
          <img *ngIf="sponsorLogo | async as image; else loadingTemplate"
               mat-card-image
               [src]="image.downloadURL">
        </div>

      </div>
    </div>
  </mat-card-content>
  <mat-card-actions fxLayout="column"
                    fxLayout.gt-sm="row"
                    fxLayoutGap="30px"
                    *ngIf="sponsor">
    <button type="button" mat-raised-button color="primary" [routerLink]="['/sponsors']">
      {{'general.menu.sponsor.list' | translate}}
    </button>
    <button type="button" mat-raised-button color="accent" [routerLink]="['/sponsors/edit', sponsor.id]">
      {{'general.edit' | translate }}
    </button>
    <button type="button" mat-raised-button color="warn" (click)="removeSponsor(sponsor)">
      {{'general.delete' | translate }}
    </button>
  </mat-card-actions>
</mat-card>

<ng-template #loadingTemplate>
  <loading-indicator></loading-indicator>
</ng-template>

