<mat-card>
  <mat-card-title>
    <mat-icon>file_upload</mat-icon>
    {{ 'general.media.list.title' | translate }}
  </mat-card-title>
  <mat-card-subtitle></mat-card-subtitle>

  <mat-card-content>
    <button mat-flat-button color="primary" (click)="showUploader()">{{'general.uploader.uploadMultiple' |
      translate}}
    </button>
    <media-uploader *ngIf="showMediaUploader" [uploaderConfig]="uploaderConfig"
                    [uploaderOptions]="uploaderOptions">
    </media-uploader>

    <div *ngIf="mediaItems; else loadingTemplate" fxLayout='row wrap'>

      <mat-card class="box"
                fxFlex="14"
                *ngFor="let mediaItem of mediaItems">

        <mat-card-title> <span>{{mediaItem.file.name}}</span> </mat-card-title>

        <mat-card-content class="text-center">

          <div class="image-file">
            <img mat-card-image *ngIf="mediaItem.file.type.indexOf('image') > -1"
                 [src]="mediaItem.downloadURL"
                 alt="{{mediaItem.file.name}}" />
          </div>

          <div class="audio-file" *ngIf="mediaItem.file.type.indexOf('audio') > -1">
            <audio controls class="preview-audio">
              <source [src]="mediaItem.downloadURL" type="audio/ogg">
              <source [src]="mediaItem.downloadURL" type="audio/mpeg">
              Your browser does not support the audio tag.
            </audio>
          </div>

          <div class="video-file" *ngIf="mediaItem.file.type.indexOf('video') > -1">
            <video class="preview-video" controls>
              <source [src]="mediaItem.downloadURL" type="video/mp4">
              <source [src]="mediaItem.downloadURL" type="video/ogg">
              Your browser does not support the video tag.
            </video>
          </div>

          <div class="other-file-type"
               *ngIf="mediaItem.file.type.indexOf('video') === -1  && mediaItem.file.type.indexOf('audio') === -1 && mediaItem.file.type.indexOf('image') === -1">
            <span class="preview-text">{{mediaItem.file.type}}</span>
          </div>
        </mat-card-content>
        <mat-card-actions class="text-right">
          <button color="warn"
                  (click)="removeMediaItem(mediaItem)"
                  mat-icon-button
                  appStopPropagation>
            <mat-icon>delete</mat-icon>
          </button>
          <button color="primary"
                  (click)="showInfoDialog(mediaItem)"
                  mat-icon-button
                  appStopPropagation>
            <mat-icon>info</mat-icon>
          </button>
        </mat-card-actions>
      </mat-card>

    </div>
  </mat-card-content>
</mat-card>

<ng-template #loadingTemplate>
  <loading-indicator></loading-indicator>
</ng-template>
