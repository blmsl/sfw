<div fxLayout="row"
     fxLayoutWrap="wrap">

  <div fxFlex="100">

    <mat-card>
      <mat-card-title>
        <mat-icon>file_upload</mat-icon>
        {{ 'general.media.centerTitle' | translate }}
      </mat-card-title>
      <mat-card-subtitle></mat-card-subtitle>

      <mat-card-content>
            <mat-tab-group *ngIf="mediaItems$ | async as mediaItems; else loadingTemplate"
                           [dynamicHeight]="true">
              <mat-tab label="{{'general.media.list.title' | translate}} {{'(' + mediaItems.length + ')' }}">

                <div fxLayout="row"
                     fxLayoutWrap="wrap">

                  <div fxFlex.gt-sm="75"
                       fxFlex="100">
                    <media-gallery [mediaItems]="mediaItems"
                                   (removeMediaItem)="removeMediaItem($event)">
                    </media-gallery>
                  </div>

                  <div fxFlexOffset.gt-sm="2"
                       fxFlex.gt-sm="23"
                       fxFlex="100">
                    <mat-tab-group [dynamicHeight]="true">
                      <mat-tab label="{{'general.media.gallery.title' | translate}}">
                        <media-gallery-list></media-gallery-list>
                      </mat-tab>
                      <mat-tab label="{{'general.media.gallery.create' | translate}}">
                        <media-gallery-form></media-gallery-form>
                      </mat-tab>
                    </mat-tab-group>
                  </div>

                </div>
              </mat-tab>
              <mat-tab label="{{'general.media.uploader.title' | translate}}">
                <media-uploader (uploadCompleted)="uploadCompleted.emit($event)"
                                [uploaderConfig]="uploaderConfig"
                                [uploaderOptions]="uploaderOptions">
                </media-uploader>
              </mat-tab>
            </mat-tab-group>

      </mat-card-content>
    </mat-card>
  </div>
</div>

<ng-template #loadingTemplate>
  <loading-indicator></loading-indicator>
</ng-template>
